<div class="col-md-12">
    <h1 class="my-3">
        {{ 'administracion.reasignacionOrdenes.titulo' | translate }}
    </h1>
</div>
<div class="row mx-0 w-100 pb-5 px-3">
    <div class="col-md-12 card">
        <form class="form--default w-100" [formGroup]="form" *ngIf="isForm | async as isForm">
            <div class="row p-3">
                <!-- numero Solicitud -->
                <div class="col-sm-3 col-md-3">
                    <div class="form-group row align-items-center">
                        <label appMimLabel for="numeroSolicitud" class="col-sm-12 col-form-label">
                            {{ 'administracion.reasignacionOrdenes.filtros.numeroSolicitud' | translate }}
                        </label>
                        <div class="col-sm-12">
                            <div class="input-group" appMimInput [for]="'numeroSolicitud'"
                                [controlName]="'numeroSolicitud'">
                                <input type="text" class="form-control" id="numeroSolicitud"
                                    formControlName="numeroSolicitud" name="numeroSolicitud" mask="099999999999999" />
                            </div>
                        </div>
                        <app-mim-input-error class="col-sm-12" controlName="numeroSolicitud" errorKey="required">
                            {{ 'global.required' | translate : { campo: 'administracion.reasignacionOrdenes.filtros.numeroSolicitud' | translate } }}
                        </app-mim-input-error>
                    </div>
                </div>

                <!-- colaborador -->
                <div class="col-sm-5 col-xl-5">
                    <div class="form-group row align-items-center">
                        <label class="col-sm-12 col-form-label" appMimLabel for="colaborador">
                            {{ 'administracion.reasignacionOrdenes.filtros.colaborador' | translate }}
                        </label>
                        <div class="col-sm-12">
                            <div class="input-group" appMimInput [for]="'colaborador'" [controlName]="'colaborador'">
                                <app-mim-select class="w-100" [inputId]="'colaborador'" [options]="colaborador"
                                    formControlName="colaborador" [optionKey]="'nombre'" [filter]="true"
                                    ngDefaultControl>
                                </app-mim-select>
                            </div>
                        </div>
                        <app-mim-input-error class="col-sm-12" controlName="colaborador" errorKey="required">
                            {{ 'global.required' | translate : { campo: 'administracion.reasignacionOrdenes.filtros.colaborador' | translate } }}
                        </app-mim-input-error>
                        <app-mim-input-error class="col-sm-12" controlName="colaborador" errorKey="maxlength">
                            {{ 'global.maxCaracteres' | translate
                                :{ campo: 'administracion.reasignacionOrdenes.filtros.colaborador' | translate, max: '80' | translate }
                            }}
                        </app-mim-input-error>
                    </div>
                </div>

                <div class="row col-md-3 justify-content-end align-items-center">
                    <!-- Botones -->
                    <div class="col-xl-12">
                        <div class="d-flex flex-row-reverse">
                            <button type="button" class="btn btn--gray2 btn--md w-100 mx-1" (click)="limpiar()">
                                {{ 'global.clean' | translate }}
                                <span class="icon-cross ml-3"></span>
                            </button>
                            <button type="submit" class="btn btn--border_green1 btn--md w-100 mx-1" (click)="buscar()">
                                {{ 'global.search' | translate }}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <div class="mb-5">
        <app-mim-grid [configuracion]="configuracion.gridReasignacion"></app-mim-grid>
    </div>
</div>

<div class="card cards--footer border-0 rounded-0 panel-crear-cuenta">
    <div class="card-body py-2">
        <div class="row mx-0 w-10 justify-content-end align-items-center">
            <!-- Botones -->
            <div class="col-xl-12">
                <div class="d-flex flex-row-reverse">

                    <button class="btn btn--orange1 btn--md mr-2" (click)="_toggle(true)"
                        [disabled]="!habilitarAsignar()">
                        <span class="icon-users mr-2"></span>
                        {{ 'global.asignar' | translate }}
                    </button>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="sidebar--slide sidebar--slide_right d-flex align-items-center" [ngClass]="{ open: mostrarGuardar == true }"
    *ngIf="mostrarGuardar">
    <div class="row mx-0 w-100 justify-content-center">
        <div class="col-xl-5 col-md-7 px-0">
            <div class="card  bg--white">
                <div class="card-body">
                    <h2 class="text--gray1 text--500wt text-center">
                        {{ 'administracion.reasignacionOrdenes.asignar' | translate }}
                    </h2>

                    <form class="form--default col w-100 pt-4" [formGroup]="formAsigna"
                        *ngIf="isFormAsigna | async as isFormAsigna">
                        <div class="form-group row align-items-center">
                            <label class="col-sm-12 col-form-label" appMimLabel for="colaboradorAsignado">
                                {{ 'administracion.reasignacionOrdenes.filtros.colaborador' | translate }}
                            </label>
                            <div class="col-sm-12 pt-1">
                                <div class="input-group" appMimInput [for]="'colaboradorAsignado'"
                                    [controlName]="'colaboradorAsignado'">
                                    <app-mim-select class="w-100" [inputId]="'colaboradorAsignado'"
                                        [options]="colaboradorAsignado" formControlName="colaboradorAsignado"
                                        [optionKey]="'nombre'" [filter]="true" ngDefaultControl>
                                    </app-mim-select>
                                </div>
                            </div>
                        </div>

                        <!-- ObservaciÃ³n -->
                        <div class="form-group row align-items-center">
                            <label appMimLabel for="observacion" class="col-sm-12 col-form-label">
                                {{ 'administracion.protecciones.coberturas.observacion' | translate }}
                            </label>
                            <div class="col-sm-12">
                                <div class="input-group" appMimInput [for]="'observacion'"
                                    [controlName]="'observacion'">
                                    <textarea type="text" rows="5" class="form-control" id="observacion"
                                        formControlName="observacion" name="observacion" maxlength="1000" mask="a*"
                                        [patterns]="patterns" [dropSpecialCharacters]="false">
                                            </textarea>
                                </div>
                            </div>
                            <app-mim-input-error class="col-sm-12" controlName="observacion" errorKey="required">
                                {{ 'global.required' | translate  : { campo: 'administracion.protecciones.coberturas.observacion' | translate } }}
                            </app-mim-input-error>
                            <app-mim-input-error class="col-sm-12" controlName="observacion" errorKey="maxlength">
                                {{ 'global.maxCaracteres' | translate
                                                    :{ campo: 'administracion.protecciones.coberturas.observacion' | translate, max: '1000' | translate }
                                                }}
                            </app-mim-input-error>
                        </div>
                        <div class="row justify-content-center">
                            <button class="btn btn--md btn--blue1 btn-min-with mx-2" (click)="guardar()"
                                [disabled]="!formAsigna.valid">
                                {{ 'global.si' | translate }}
                            </button>
                            <button class="btn btn--md btn--gray2 btn-min-with mx-2" (click)="_toggle(false)">
                                {{ 'global.no' | translate }}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
